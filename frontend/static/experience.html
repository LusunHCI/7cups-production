<html>

<head>
    <title>Chatbot</title>

    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway:500&display=swap" rel="stylesheet">

    <!--Import Font Awesome Icon Font-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
        integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

    <!--Import materialize.css-->
    <link rel="stylesheet" type="text/css" href="../static/css/materialize.min.css">

    <!--Main css-->
    <link rel="stylesheet" type="text/css" href="../static/css/style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1">

</head>

<body>

    <nav>
        <div class="nav-wrapper" style=" background-color: #5a17ee;">
            <ul id="nav-mobile" class="left hide-on-med-and-down">
                <li class="active" id="experience"><a>Experience the Chatbot</a></li>
                <li id="codesign"><a>Co-design Activities</a></li>
            </ul>
        </div>
    </nav>


    <div class="intentsDictionary">
        <a class="waves-effect waves-light btn modal-trigger" href="#modal1" id="dict-instruction"
            style="background-color:white; border-radius:30px; border: 2px solid #5a17ee; color: #5a17ee; position: fixed; right: 15px; top: 15px">Intents
            Dictionary
        </a>
    </div>

    <div id="modal1" class="modal">
        <div class="modal-content">
            <h4>Dictionary</h4>
            <table>
                <thead>
                    <tr>
                        <th> Intents </th>
                        <th> Explaination</th>
                        <th> Example </th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>greeting</td>
                        <td>The listener is saying hi to start the conversation</td>
                        <td>Good morning! Welcome to 7cups!</td>
                    </tr>
                    <tr>
                        <td>conventional opening</td>
                        <td>The listener is being courteous and seguing into discussion of the member's stressor.</td>
                        <td>How are you?</td>
                    </tr>
                    <tr>
                        <td>open question</td>
                        <td> The listener is trying to gather information, understand, or elicit the client's story.
                        </td>
                        <td>How long were you and your ex together?</td>
                    </tr>
                    <tr>
                        <td>facilitate</td>
                        <td>The listener is trying to get more details from the member regarding their conflict.</td>
                        <td>Can you tell me more about what happened?</td>
                    </tr>
                    <tr>
                        <td>reflect</td>
                        <td>The listener is reflecting their understanding of the information they have recieved from
                            the member.</td>
                        <td>So you were together for 6 months</td>
                    </tr>
                    <tr>
                        <td>empathy</td>
                        <td>The listener is demonstrating their empathy.</td>
                        <td>I felt the same way with my ex.</td>
                    </tr>
                    <tr>
                        <td>condolence</td>
                        <td>The listener is comforting member.</td>
                        <td>I'm so sorry to hear that.</td>
                    </tr>
                    <tr>
                        <td>support</td>
                        <td>The listener is providing sympathetic, compassionate, or understanding comments that have
                            the quality of agreeing or siding with the client.</td>
                        <td>I understand that, i believe you.</td>
                    </tr>
                    <tr>
                        <td>affirm</td>
                        <td>"The listener is saying something positive or complimentary to the member in the form of
                            expressed appreciation, confidence or reinforcement.
                        </td>
                        <td>That's awesome! It is definitely nice to get your mind off of all the stressors in life.
                        </td>
                    </tr>
                    <tr>
                        <td>clarification</td>
                        <td>The listener is confused and wants more details or clarification.</td>
                        <td>What do you mean?</td>
                    </tr>
                    <tr>
                        <td>warning</td>
                        <td>The listener provides a warning or threat, implying negative consequences unless the client
                            takes a certain action.</td>
                        <td>I'm not allowed to give advice to you.</td>
                    </tr>
                    <tr>
                        <td>confront</td>
                        <td>The listener directly disagrees, argues, corrects, shames, blames, seeks to persuade,
                            criticizes, judges, labels, moralizes, ridicules, or questions the member's honesty.</td>
                        <td>No you are not!</td>
                    </tr>
                    <tr>
                        <td>inappropriate</td>
                        <td>The listener is abusing their role and engaging in inappropriate behavior.</td>
                        <td>Tell me about your sex life. </td>
                    </tr>
                    <tr>
                        <td>closing</td>
                        <td>The listener is ending the conversation.</td>
                        <td>Take care of yourself and your heart.</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <div class="modal-footer">
            <a class="modal-close waves-effect waves-green btn-flat">Close</a>
        </div>
    </div>



    <div class="container" id="container">

        <div class="instruction" id="instruction"
            style="width:calc(100% - 400px); position: fixed; left: 400px; bottom: 50px; top:65px">
            <h4>Instructions</h4>
            <p class="experience_instruction">
                Please try to communicate with the chatbot on the left. The chatbot will simulate a 7 cups member
                struggling with their breakup that you, as a listener, can help and further develop your skills as a
                listener. The chatbot is not perfect so if you encounter a misstep in your conversation with the
                chatbot, just try to continue the conversation in a new direction. In the co-design activities that
                follow your interaction with the chatbot, you will have an opportunity to correct these missteps. Try to
                interact with the chatbot for 10 minutes. When you are done interacting with the chatbot, click “End the
                conversation” to move on to the next section of co-design. In the next co-design stage, you will go
                through these messages and answer several questions to help us improve this chatbot.
            </p>
            <div class="startButton">
                <div id='startCodesign' class='btn waves-effect waves-light'
                    style='background-color:#5a17ee; position: fixed; right: 15px; bottom: 5px; width: 10%; border-radius:30px;'>
                    Start</div>
            </div>
        </div>

        <div class="bye" id="goodbye"
            style="width:clac(100% - 400px); position: fixed; left: 400px; top: 300px; font-size: 20px;">
            <p>
                Thank you for your input and participation in the co-design of the 7 cups listener training chatbot! We
                really appreciate the time and effort you took to engage with us in the co-creation of this chatbot.
            </p>
        </div>

        <div id="previousButton" class="btn waves-effect waves-light "
            style="background-color:#5a17ee; border-radius: 30px; position: fixed; left: 400px; bottom: 15px; width: 10%;">
            Previous</div>
        <div id="nextButton" class="btn waves-effect waves-light "
            style="background-color:#5a17ee; border-radius: 30px; position: fixed; right: 15px; bottom: 15px; width: 10%;">
            Next</div>
        <div id="submitButton" class="btn waves-effect waves-light "
            style="background-color:#5a17ee; border-radius: 30px; position: fixed; right: 15px; bottom: 15px; width: 10%;">
            Submit</div>

        <form id="feedbackForm">
            <div class="feedback" id="feedback"
                style="width:calc(100% - 400px); position: fixed; left: 400px; bottom: 50px; top:65px;">
                <a class="modal-trigger" href="#modal2" style="position:fixed;right:15px"><i class="material-icons"
                        style="color: #5a17ee; font-size: 35px; transform: rotate(180deg);">error_outline</i></a>
            </div>
        </form>


        <div id="modal2" class="modal">
            <div class="modal-content">
                <h4>Instruction</h4>
                <p> In this section of the codesign, we will replay your conversation with the chatbot, during this
                    process, please help us correct the chatbot by answering the corresponding questions regarding
                    Intents and Responses. <br> <br><u><b>Intents</b></u> refer to the goal or intention of any message
                    you send to the chatbot. When you send a message to the chatbot, it will try and detect the correct
                    meaning, or intent, of the message with a certain <u><b>confidence</b></u> as indicated by the
                    confidence score out of 1.00. The example below illustrates how the chatbot detects that a listener
                    is trying to greet them. <br> <br>
                <table>
                    <tbody>
                        <tr>
                            <td> Listener: “Hi!” </td>
                            <td> Intent: greeting (confidence score = 0.98) </td>
                        </tr>
                    </tbody>
                </table> <br><u><b>Responses</b></u> are given by the chatbot based on the intent. For example, if the
                intent is detected to be greeting, then a reasonable response from the chatbot would be “Hello”. <br>
                <br>
                <table>
                    <tbody>
                        <tr>
                            <td> Listener: greeting </td>
                            <td> Chatbot Response: "Hello" </td>
                        </tr>
                    </tbody>
                </table> <br>The chatbot isn’t perfect so if it fails to capture your Intent, it will likely provide an
                inadequate Response to your message. In this section, we will replay your conversations message by
                message and your task will be to improve the chatbot by choosing the most accurate Intents and
                reasonable Responses. Please press “Start” to begin.<br></p>
            </div>
            <div class="modal-footer">
                <a class="modal-close waves-effect waves-green btn-flat">Close</a>
            </div>
        </div>

        <div class="widget">
            <div class="chat_header">

                <!--Add the name of the bot here -->
                <span class="chat_header_title">Chat with Andrew</span>
            </div>

            <!--Chatbot contents goes here -->
            <div class="chats" id="chats">
                <div class="clearfix"></div>
            </div>

            <!--keypad for user to type the message -->
            <div class="keypad">
                <textarea id="userInput" placeholder="Type a message..." class="usrInput"></textarea>
                <div id="sendButton"><i class="fa fa-paper-plane" aria-hidden="true"></i></div>
            </div>
        </div>
        <div class="endButton">
            <div id="endConversation" class="btn waves-effect waves-light disabled"
                style="background: #5a17ee; width: 80%; left: 35px; border-radius:30px;">End the Conversation</div>
        </div>

        <!--     <div class="profile_div" id="profile_div">
        <i class="large material-icons themeColor">android</i>
    </div> -->
    </div>
    <div id="codesign-tips" style="display: none;">

        <div class="instruction" id="co-instruction"
        style="width:calc(100% - 400px); position: fixed; left: 400px; bottom: 50px; top:65px">
        <h4>Instructions</h4>
        <p class="experience_instruction">
            Now that you have interacted with Andrew, the next part of this experiment involves analyzing the conversation you just had to help improve the current chatbot. 
        </p>
    </div>

        <div class="widget">
            <div class="chat_header">

                <!--Add the name of the bot here -->
                <span class="chat_header_title">Chat with Andrew</span>
            </div>

            <!--Chatbot contents goes here -->
            <div class="chats_tip">
                <div class="clearfix"></div>
                <img class="userAvatar" src="../static/img/userAvatar.jpg">
                <p class="userMsg" id="conversationMsg1">hi </p>
                <div class="clearfix"></div>
                <div id="chatbotTyping2" style="display: none;"><img class="botAvatar"
                        src="../static/img/andrew_avatar.png">
                    <div class="botTyping">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                </div><img class="botAvatar" src="../static/img/andrew_avatar.png" style="">
                <p class="botMsg" id="conversationMsg2" style="">Hi, I'm seeking support for a breakup.</p>
                <div class="clearfix" style=""></div><img class="userAvatar" src="../static/img/userAvatar.jpg">
                <p class="userMsg" id="conversationMsg3">how are you doing? </p>
                <div class="clearfix"></div>
                <div id="chatbotTyping4" style="display: none;"><img class="botAvatar"
                        src="../static/img/andrew_avatar.png">
                    <div class="botTyping">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                </div><img class="botAvatar" src="../static/img/andrew_avatar.png" style="">
                <p class="botMsg" id="conversationMsg4" style="">I've been struggling lately, dealing with my ex.</p>
                <div class="clearfix" style=""></div>
                <div id="chatbotTyping5" style="display: none;"><img class="botAvatar"
                        src="../static/img/andrew_avatar.png">
                    <div class="botTyping">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                </div><img class="botAvatar" src="../static/img/andrew_avatar.png" style="">
                <p class="botMsg" id="conversationMsg5" style="">My girlfriend-- or I should say, now ex-- recently
                    broke up with me.</p>
                <div class="clearfix" style=""></div>
            </div>

            <!--keypad for user to type the message -->
            <div class="keypad">
                <textarea id="userInputdemo" placeholder="Type a message..." class="usrInput" spellcheck="false"
                    disabled="disabled"></textarea>
                <div id="sendButton" disabled="disabled"><i class="fa fa-paper-plane" aria-hidden="true"></i></div>
            </div>
        </div>
        <div class="feedback" id="feedback_tips" style="width:calc(100% - 400px); position: fixed; left: 400px; bottom: 50px; top:65px;">
            <a class="modal-trigger" href="#modal2" style="position:fixed;right:15px"><i class="material-icons" style="color: #5a17ee; font-size: 35px; transform: rotate(180deg);">error_outline</i></a>
            <div class="codesign" id="tip_msg1" style="display: none;"> <h6>Your message</h6> <div class="lmsg"> <p class="listenerMsg">hi</p> </div> <div class="selectIntents"> <p> The chatbot interpreted the intent of your message as "greeting" with the confidence as 1.00/1.00. </p></div><input type="text" class="hiddenInput" name="currentIntent1" id="currentIntent1" style="height:1px;display:none;"><div class="intentCard"><div class="card"><div class="card-content"><b>greeting</b>: The listener is saying hi to start the conversation <br> <i>Ex: Hi, welcome to 7cups</i></div> </div> </div><div class="isCorrect"><p> Did this capture your intention?</p></div><div class="choiceButton"> <input type="text" class="hiddenInput" name="yesno1" id="yesno1" style="height:1px;display:none;"> <br> <button class="yesintent btn" id="yesIntent1" onclick="yesintent(1)" type="button" style="background-color:white;border-radius:30px; border: 2px solid #5a17ee; color: #5a17ee"> Yes </button>  <button class="nointent btn" id="noIntent1" onclick="nointent(1)" type="button" style="background-color:white;border-radius:30px; border: 2px solid #5a17ee; color: #5a17ee"> No </button> </div><div class="yesDesc" id="yesDesc1"> <p style="float:left; width: 100%;">To confirm, press the Next button. </p> </div> <div class="noDesc" id="noDesc1"> <p style="float:left; width: 100%;"> Please select one intent from below. If none of the following captured your intention or you have an idea for a better intent, please click the "add new intent".</p> </div><div class="intentOption" id="intentOption1"> <div class="input-field col s12" style="float:left;width:100%;"> <div class="select-wrapper"><input class="select-dropdown dropdown-trigger" type="text" readonly="true" data-target="select-options-caa60e43-3c06-55e1-93a4-6d67e9ffa7a2"><ul id="select-options-caa60e43-3c06-55e1-93a4-6d67e9ffa7a2" class="dropdown-content select-dropdown" tabindex="0"><li id="select-options-caa60e43-3c06-55e1-93a4-6d67e9ffa7a20" tabindex="0" class="selected"><span>greeting: The listener is saying hi to start the conversation  Ex: Hi, welcome to 7cups  (confidence=1.00)</span></li><li id="select-options-caa60e43-3c06-55e1-93a4-6d67e9ffa7a21" tabindex="0"><span>NONE OF THIS APPLIES</span></li></ul><svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg><select name="intentselect1" id="intentsselect1" tabindex="-1"><option value="greeting">greeting: The listener is saying hi to start the conversation  Ex: Hi, welcome to 7cups  (confidence=1.00)</option><option id="add_new1" value="Add_More">NONE OF THIS APPLIES</option></select></div> </div><div onclick="addNewIntents(1)"><i class="material-icons" style="vertical-align:middle">add</i> <a style="color:black">Add New Intent</a> </div></div><div class="otherIntent" id="otherIntent1"><div class="card"><div class="input-field col s6" style="width:50%;position:relative;left:10px;"> <input placeholder="Ex.greeting" name="newIntent1" id="newIntent1" type="text"><label for="newIntent1" class="active" style="left:0;">New Intent Name</label></div> <div class="input-field col s12"><textarea placeholder="Ex.The listener is saying hi to start the conversation." class="materialize-textarea" name="newExplaination1" id="newExplaination1" style="width:90%;position:relative;left:10px;"></textarea> <label for="newExplaination1" class="active">Please describe your new intent</label></div> </div> </div></div>
    </div>

    <!--JavaScript at end of body for optimized loading-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="../static/layui/layui.all.js"></script>
    <script type="text/javascript" src="../static/js/materialize.min.js"></script>

    <!--Main Script -->
    <!-- <script type="text/javascript" src="../static/js/experience.js"></script> -->
    <script>document.write('<script src="../static/js/experience.js?v=' + new Date().getTime() + '"><\/script>')</script>

    <!--Chart.js Script -->
    <script type="text/javascript" src="../static/js/chart.min.js"></script>


</body>

</html>